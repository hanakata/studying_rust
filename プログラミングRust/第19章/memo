19章 並列性

Rustのスレッドの使い方は以下
・フォークジョイン並列
・チャネル
・可変状態の共有

スレッドの最も簡単な使い方は複数の完全に独立なタスクを一度に実行すること。
→フォークジョイン
これが魅力的なのは以下の理由から
・単純
・ボトルネックがない
・性能を計算するのが簡単
・プログラムの正しさを推測するのが容易
欠点は以下
・独立したユニットに分割できる仕事でなければならない。

フォークジョイン用に作成されたライブラリはRayon。

チャネル＝あるスレッドから別のスレッドに値を送信する一方通行のパイプ
排他ロック＝複数のスレッドがあるデータにアクセスする際に同時ではなく交互にアクセスするように強制するために用いる
Mutexを利用することで排他ロックは可能。

ほとんど変更されない設定ファイルなどは排他ロックをしてしまうとボトルネックになるので
リードライトロックを利用する。


以下のような条件が満たされるまでスレッドが待たなければならない状況がある。
・サーバをシャットダウンするさい、メインスレッドはほかのスレッドが終了するまで待たなければならない。
・ワーカスレッドに仕事がない場合、処理すべきデータができるまで待たなければならない


