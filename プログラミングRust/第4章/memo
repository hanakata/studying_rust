4章 所有権

Rustで安全なシステムをプログラムするために重要なこと
・プログラム中の値の生存期間はプログラマが決める
・プログラムは解放済みのオブジェクトへのポインタを使うことはない。

Rustではすべての値はその生存期間を決定する唯一の所有者を持つ。
解放された場合、所有されていた値も解放される。
Box型の場合、ヒープ上にメモリを確保する。Boxが解放されるとその空間も解放される。

値を別の所有者に移動することができるのでツリーを構築し変更し分割することができる。
標準ライブラリに参照カウントポインタのRcとarkがある。これを使うことで
一定の制限下において複数の所有者を設定することができる。
値への参照の借用ができる。

Rustの場合、ほとんどの型で返り値の返却の際にコピーされず移動する。
元は渡した後未初期化状態になる。先が生存期間を制御する。

例えば変数に値を入れた後、if文で分岐後にその変数を見ようとしても未初期化状態になる。
なのでループで変数から値を移動することも禁止されている。